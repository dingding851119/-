<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æ—…éŠåˆ†å¸³å·¥å…·</title>
  <style>
    body { font-family: sans-serif; max-width: 500px; margin: auto; }
    input { margin: 4px 0; width: 100%; padding: 6px; }
    button { margin-top: 8px; padding: 8px; width: 100%; }
    .result { margin-top: 16px; }
  </style>
</head>
<body>

<h2>æ—…éŠåˆ†å¸³å·¥å…·</h2>

<div id="inputs"></div>

<button onclick="addRow()">â• æ–°å¢æ—…ä¼´</button>
<button onclick="calculate()">ğŸ§® è¨ˆç®—åˆ†å¸³</button>

<div class="result" id="result"></div>

<script>
let people = [];

function addRow() {
  const index = people.length;
  people.push({ name: "", paid: 0 });

  const div = document.createElement("div");
  div.innerHTML = `
    <input placeholder="å§“å" oninput="people[${index}].name=this.value">
    <input type="number" placeholder="ä»£ä»˜é‡‘é¡" oninput="people[${index}].paid=Number(this.value)">
  `;
  document.getElementById("inputs").appendChild(div);
}

function calculate() {
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "";

  const total = people.reduce((sum, p) => sum + p.paid, 0);
  const avg = total / people.length;

  let creditors = [];
  let debtors = [];

  people.forEach(p => {
    const diff = p.paid - avg;
    if (diff > 0) creditors.push({ name: p.name, amount: diff });
    if (diff < 0) debtors.push({ name: p.name, amount: -diff });
  });

  creditors.forEach(c => {
    debtors.forEach(d => {
      if (c.amount > 0 && d.amount > 0) {
        const pay = Math.min(c.amount, d.amount);
        resultDiv.innerHTML += `<p>${d.name} â†’ ${c.name}ï¼š${Math.round(pay)} å…ƒ</p>`;
        c.amount -= pay;
        d.amount -= pay;
      }
    });
  });
}

// é è¨­å…ˆçµ¦ä¸€å€‹æ¬„ä½
addRow();
</script>

</body>
</html>
